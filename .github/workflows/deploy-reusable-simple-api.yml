name: Deploy Infrastructure Minimal API

on:
  workflow_call:
    inputs:
      environment:
        required: true
        type: string
    secrets:
      KOMODO_API_URL:
        required: true

env:
  ENVIRONMENT: ${{ inputs.environment }}

jobs:
  validate:
    name: Validate Configuration
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Validate inputs
        run: |
          echo "Validating inputs"
          echo "✅ Inputs validated"
      
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      
      - name: Install validation tools
        run: pip install pyyaml requests -q
      
      - name: Setup API helpers
        run: |
          echo "Setting up API helpers..."
          # Simple function test
          test_function() {
            echo "Test function works"
          }
          test_function
          echo "✅ API helpers configured"
